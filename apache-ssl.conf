<VirtualHost *:80>

	ServerName csci870.nydev.me
	ServerAlias *.csci870.nydev.me
	Redirect permanent / https://csci870.nydev.me/

</VirtualHost>

<VirtualHost _default_:443>

	ServerName csci870.nydev.me:443
	ServerAlias csci870.nydev.me *.csci870.nydev.me
	ServerAdmin admin@nydev.me

	SetEnv SECRET    ~
	SetEnv DB_NAME   ~
	SetEnv DB_USER   ~
	SetEnv DB_PSWD   ~
	SetEnv MAIL_USER ~
	SetEnv MAIL_PSWD ~

	WSGIDaemonProcess csci870 user=git group=www-data
	WSGIScriptAlias / /srv/csci870.nydev.me/wsgi.py

	<Directory /srv/csci870.nydev.me/>
		WSGIProcessGroup csci870
		WSGIApplicationGroup  %{GLOBAL}
		#WSGIRestrictStdout   Off
		WSGIPassAuthorization On
		WSGIScriptReloading   On
		Require all granted
	</Directory>

	Alias /static /srv/csci870.nydev.me/static
	<Directory /srv/csci870.nydev.me/static/>
		Require all granted
	</Directory>

	SSLEngine on
	SSLCipherSuite HIGH:!aNULL:!MD5
	SSLHonorCipherOrder on

	SSLCertificateFile	/etc/apache2/ssl/certs/domain.crt
	SSLCertificateKeyFile	/etc/apache2/ssl/private/domain.key
	SSLCertificateChainFile	/etc/apache2/ssl/certs/intermediate.pem

	LogLevel warn
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>
